.TH "make_manifest" "1" "https://avpres.net/Bash_AVpres/" "2022-12-31" "Bash Scripts for AVpres"
.
.\" turn off justification for nroff
.if n .ad l
.\" turn off hyphenation
.nh
.
.de Sp \" vertical space (when .PP is not used)
.if t .sp .5v
.if n .sp
..
.de Vb \" begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" end verbatim text
.ft R
.fi
..
.SH NAME
make_manifest - Make a checksum manifest of a folder or file
.SH SYNOPSIS
\fBmake_manifest -i \fIinput_path\fR [\fB-o \fIoutput_file\fR]
.LP
\fBmake_manifest -h\fR | \fB-x
.SH DESCRIPTION
\fBBash AVpres\fR is a collection of Bash scripts for audio-visual preservation. One of these small programs is \fBmake_manifest\fR. It creates a checksum manifest of a folder or file.
.PP
Bash version 3.2 or later is strongly recommended. We advise to use the current version 5.2.
.SH OPTIONS
.SS BASIC OPTIONS
.TP 4
\fB-i \fIinput_path\fB, --input=\fIinput_path
path to an input folder or file
.TP
\fB-o \fIoutput_file\fB, --output=\fIoutput_file
path to the manifest file
.Sp
If this parameter is not passed, then the script uses for a folder
.Sp
.Vb
\&    <input_path>_<algorithm>.txt
.Ve
.Sp
and for a file
.Sp
.Vb
\&    <input_path>_<extension>_<algorithm>.txt
.Ve
.SS ADVANCED OPTIONS
.TP 4
The arguments of the advanced options can be overwritten by the user. Please remember that any string containing spaces must be quoted, or its spaces must be escaped.
.TP
\fB--algorithm=\fR(\fIxxh32\fR|\fIxxh64\fR|\fIxxh128\fR|\fImd5\fR|\fIsha1\fR|\fIsha256\fR|\fIsha512\fR|\fIcrc32\fR)
We advise to use a faster non-cryptographic hash functions, because we consider that, for archival purposes, there is no necessity to apply a more complex unkeyed cryptographic hash function. The algorithm name can be passed in upper or lower case letters.
.Sp
The default algorithm is xxHash 128:
.br
.Vb 1
\&    \fB--algorithm=xxh128
.Ve
.Sp
Note that until end of 2020 the default algorithm was MD5.
.TP
The script needs external commands to compute recursively the hash checksums of all elements inside the folder. Run either \fBmake_manifest -x\fR or \fBmake_manifest --options\fR to see the actual default tools on a specific computer.
.TP
.B --xxh32='/bin/xxhsum -H32'
xxHash 32 command
.TP
.B --xxh64='/bin/xxhsum -H64'
xxHash 64 command
.TP
.B --xxh128='/bin/xxhsum -H128'
xxHash 128 command
.TP
.B --md5='/bin/md5sum'
MD5 command
.TP
.B --sha1='/bin/sha1sum'
SHA-1 command
.TP
.B --sha256='/bin/sha256sum'
SHA-256 command
.TP
.B --sha512='/bin/sha512sum'
SHA-512 command
.TP
.B --crc32='/bin/crc32'
CRC-32 command
.TP
\fB--exclusion=(\fIfile_list\fB)
The exclusion \fIfile_list\fR is defined as an array and its default value is:
.Sp
.Vb 1
\&    exclusion=('.DS_Store' 'desktop.ini')
.Ve
.Sp
To avoid any exclusion, use an empty array:
.Sp
.Vb 1
\&    exclusion=()
.Ve
.TP
Output file default parameters:
.TP
.B --suffix='_<algorithm>'
The suffix is inserted at the end of the filename, immediately before the period and the extension. Note that a preceding underscore, if wished, must be added.
.TP
.B --extension='txt'
As it is a text file the default value is 'txt'.
.SS INFORMATIVE OPTIONS
.TP 4
.B -h, --help
display a help message
.TP
.B -x, --options
display the advanced options with their default arguments
.SH NOTES
.TP 4
The '.DS_Store' files generated by macOS and the 'desktop.ini' files generated by Windows are deleted before creating the checksum manifest. You can modify the default exclusion file list in the configuration file.
.SS CONFIGURATION FILE
.TP 4
An external configuration file
.Sp
.Vb 1
\&${HOME}/.config/AVpres/Bash_AVpres/make_manifest.txt
.Ve
.TP
can be defined, allowing the script to import alternate default values for the following options:
.Sp
.Vb 1
\&default_algorithm
\&md5
\&sha1
\&sha256
\&sha512
\&xxh32
\&xxh64
\&xxh128
\&crc32
\&suffix
\&extension
\&exclusion
.Ve
.SS LOG FILES
.TP 4
Temporary log files are stored at
.Sp
.Vb 1
\&/tmp/AVpres/make_manifest.XXXXXXXXXX
.Ve
.TP
The log files can be used for debugging, for example by running \fBcat\fR on the address prompted with fatal error messages:
.Sp
.Vb 1
\&cat /tmp/AVpres/make_manifest.XXXXXXXXXX
.Ve
.SH SEE ALSO
.TP 4
Yann Collet: "xxHash fast digest algorithm", version 0.1.1, 2018-10-10
.br
https://github.com/Cyan4973/xxHash/blob/dev/doc/xxhash_spec.md
.TP
\fBRFC 1321\fR, "The MD5 Message-Digest Algorithm", April 1992
.br
https://www.rfc-editor.org/info/rfc1321
.TP
\fBRFC 3174\fR, "US Secure Hash Algorithm (SHA1)", September 2001
.br
https://www.rfc-editor.org/info/rfc3174
.TP
"Descriptions of SHA-256, SHA-384, and SHA-512"
.br
https://web.archive.org/web/20130526224224/http://csrc.nist.gov/
.br
groups/STM/cavp/documents/shs/sha256-384-512.pdf
.TP
\fBupdate_manifest\fR(1) and \fBverify_manifest\fR(1).
.TP
\fBxxhsum\fR(1), \fBmd5sum\fR(1), \fBsha1sum\fR(1), \fBsha256sum\fR(1) and \fBsha512sum\fR(1).
.SH COPYRIGHT
Copyright (c) 2003-2023 by Reto Kromer
.SH LICENSE
The \fBmake_manifest\fR Bash script is released under a 3-Clause BSD License.
.SH DISCLAIMER
The \fBmake_manifest\fR Bash script is provided "as is" without warranty or support of any kind.
